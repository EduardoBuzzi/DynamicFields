!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t=Object.defineProperty,e=(e,i,s)=>((e,i,s)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s)(e,"symbol"!=typeof i?i+"":i,s);class i{constructor(t,n,a=!1,r=!0,o=[],h,c){e(this,"triggerSelector"),e(this,"trigger"),e(this,"value"),e(this,"shouldBeRequired"),e(this,"clearOnHide"),e(this,"affectedFields"),e(this,"affectedBlock"),this.triggerSelector=t,this.trigger=s.createField(t),this.shouldBeRequired=a,this.clearOnHide=r,this.value="string"==typeof n?[n]:n,this.affectedFields=o.map((t=>(c&&!t.parentSelector&&(t.parentSelector=c),s.createField(t.selector,t.required,t.associatedElements,t.parentSelector)))).filter((t=>null!==t)),h&&(this.affectedBlock=document.querySelector(h),this.affectedBlock.classList.add("dcf__animated")),this.initialize(),i.addUtilityClasses()}initialize(){this.trigger.addEventListener((()=>{this.check()}))}check(t=null){let e=!1;if(t)e=this.value.includes(t);else{const t=this.trigger.getValues().filter((t=>t));e=0!==t.length&&t.some((t=>this.value.includes(t)))}this.updateVisibility(e),this.updateRequired(e),!e&&this.clearOnHide&&this.clearFields()}updateVisibility(t){var e;if(this.affectedBlock)return this.affectedBlock.classList.toggle("d-none",!t);null==(e=this.affectedFields)||e.forEach((e=>{e.toggleVisibility(t)}))}updateRequired(t){var e;null==(e=this.affectedFields)||e.forEach((e=>{e.setRequired(t&&this.shouldBeRequired)}))}clearFields(){var t;null==(t=this.affectedFields)||t.forEach((t=>{this.clearOnHide&&t.clear()}))}static addUtilityClasses(){if(!document.getElementById("dcf-utility-styles")){const t=document.createElement("style");t.id="dcf-utility-styles",t.innerHTML=".d-none{display:none!important}.dcf__animated{animation:dcf__appear .5s ease-in-out 1;transition-property:display,max-height;transition-duration:.5s;transition-behavior:allow-discrete;max-height:1000px}.dcf__animated.d-none{animation:dcf__disappear .5s ease-in-out 1;max-height:0}@keyframes dcf__appear{0%{opacity:0;max-height:0}to{opacity:1;max-height:1000px}}@keyframes dcf__disappear{0%{opacity:1;max-height:1000px;display:block!important}to{opacity:0;max-height:0;display:none!important}}",document.head.appendChild(t)}}}class s{constructor(t,i=!1,s,n){e(this,"selector"),e(this,"elements"),e(this,"required"),e(this,"associatedElements"),e(this,"parentSelector"),this.selector=t,this.required=i,this.elements=this.getElements(t),this.parentSelector=n,s&&(this.associatedElements=this.getElements(s)),this.addClass(this.elements)}static createField(t,e=!1,i,s){let h;if(!(h=document.querySelector(t)))throw new Error(`No elements found for selector: ${t}`);return"INPUT"===h.tagName?new n(t,e,i,s):"SELECT"===h.tagName?new a(t,e,i,s):"TEXTAREA"===h.tagName?new r(t,e,i,s):new o(t,e,i,s)}getElements(t){const e=document.querySelectorAll(Array.isArray(t)?t.join(","):t);if(0===e.length)throw new Error(`No elements found for selector: ${t}`);return Array.from(e)}addClass(t){t.forEach((t=>{t.classList.add("dcf__animated")})),this.parentSelector&&t.forEach((t=>{var e;const i=null==(e=this.parentSelector)?void 0:e.call(this,t);i&&i.classList.add("dcf__animated")})),this.associatedElements&&this.associatedElements.forEach((t=>{t.classList.add("dcf__animated")}))}addEventListener(t,e=this.getEventName()){e&&this.elements.forEach((i=>{i.addEventListener(e,t)}))}setRequired(t){this.required=t,this.elements.forEach((e=>{e.required=t}))}toggleVisibility(t){const e=t?"remove":"add";this.parentSelector?this.elements.forEach((t=>{var i;const s=null==(i=this.parentSelector)?void 0:i.call(this,t);s?s.classList[e]("d-none"):t.classList[e]("d-none")})):(this.elements.forEach((t=>{t.classList[e]("d-none")})),this.associatedElements&&this.associatedElements.forEach((t=>{t.classList[e]("d-none")})))}}class n extends s{clear(){this.elements.forEach((t=>{const e=t;"checkbox"===e.type||"radio"===e.type?e.checked=!1:e.value=""}))}getValues(){const t=[];return this.elements.forEach((e=>{const i=e;"checkbox"===i.type||"radio"===i.type?i.checked&&t.push(i.value):t.push(i.value)})),t}getEventName(){const t=this.elements[0].type;return"checkbox"===t||"radio"===t||"file"===t?"change":"input"}setRequired(t){"checkbox"!==this.elements[0].type&&super.setRequired(t)}}class a extends s{clear(){this.elements.forEach((t=>{t.selectedIndex=0}))}getValues(){return this.elements.map((t=>t.value))}getEventName(){return"change"}}class r extends s{clear(){this.elements.forEach((t=>{t.value=""}))}getValues(){return this.elements.map((t=>t.value))}getEventName(){return"input"}}class o extends s{clear(){}getValues(){return this.elements.map((t=>t.textContent||""))}getEventName(){return null}}"undefined"!=typeof window&&(window.setupConditionalFields=function(t,e=!0){if(!t||!t.length)throw new Error("No configuration provided");t.forEach((function(t){var s=new i(t.trigger,t.value,!0,t.clearOnHide,t.affected.fields,t.affected.block,t.affected.parentSelector);e&&s.check()}))})}));
